{"version":3,"file":"static/js/331.3487e7d3.chunk.js","mappings":"qNAQO,MAAMA,EAAUC,IAA4B,IAA3B,kBAAEC,GAAmBD,EAEzC,MAAM,YAAEE,IAAgBC,EAAAA,EAAAA,KAqDxB,OACIC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,SAC2B,mBAAtBL,GAEOM,EAAAA,EAAAA,MAAAF,EAAAA,SAAA,CAAAC,SAAA,EACIF,EAAAA,EAAAA,KAAA,OAAKI,UAAU,gBAAgBC,GAAG,UAIlCL,EAAAA,EAAAA,KAAA,OAAKI,UAAU,iBAAgBF,UAC3BF,EAAAA,EAAAA,KAACM,EAAAA,GAAI,CAACC,QA7DdC,UACZ,IAAK,IAADC,EACA,IAAIC,EAAc,IAAIC,KAIlBC,EAHMF,EAAYG,UAGI,KAFdH,EAAYI,WAAa,GAEG,IAD7BJ,EAAYK,cAQvB,MAAMC,EAAa,OAAJC,EAAAA,SAAI,IAAJA,EAAAA,IAAiB,QAAbR,EAAJQ,EAAAA,GAAMnB,mBAAW,IAAAW,OAAb,EAAJA,EAAmBS,IAUlC,UAP4BC,EAAAA,EAAAA,KACxBC,EAAAA,EAAAA,IAAMC,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,WACxBC,EAAAA,EAAAA,IAAM,SAAU,KAAMP,IACtBO,EAAAA,EAAAA,IAAM,WAAY,KAAMX,MAIbY,MAOd,CAAC,IAADC,QAEKC,EAAAA,EAAAA,KAAOL,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,UAAW,CAC1CN,OAAY,OAAJC,EAAAA,SAAI,IAAJA,EAAAA,IAAiB,QAAbQ,EAAJR,EAAAA,GAAMnB,mBAAW,IAAA2B,OAAb,EAAJA,EAAmBP,IAC3BS,KAAiB,OAAX7B,QAAW,IAAXA,OAAW,EAAXA,EAAa8B,KACnBC,SAAUjB,EACVkB,KAAMlB,EACNmB,OAAQ,YAEZC,QAAQC,IAAI,kCAEJC,SAASC,eAAe,QAC9BC,UAAY,gCAClB,KApB0B,CACtBJ,QAAQC,IAAI,uCAEJC,SAASC,eAAe,QAC9BC,UAAY,qCAElB,CAeJ,CAAE,MAAOC,GACLL,QAAQK,MAAM,4BAA6BA,EAE/C,GAc4CC,KAAK,SAASlC,UAAU,sBAAsBmC,GAAG,WAAUrC,SAAC,0BAO5FF,EAAAA,EAAAA,KAAA,OAAAE,SAAK,4BAGd,C","sources":["MyComp/Mattend.js"],"sourcesContent":["import React from 'react'\r\nimport { useState } from 'react';\r\nimport { auth, firestore } from '../Authen/firebase';\r\nimport { addDoc, collection, getDocs, query, serverTimestamp, where } from 'firebase/firestore';\r\nimport { Link } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\nimport { useAuth } from '../Authen/useAuth';\r\n\r\nexport const Mattend = ({ CURRENT_USER_TYPE }) => {\r\n\r\n    const { currentUser } = useAuth();\r\n\r\n    const mattend = async () => {\r\n        try {\r\n            let currentDate = new Date();\r\n            let day = currentDate.getDate();\r\n            let month = currentDate.getMonth() + 1; // January is 0, so we add 1\r\n            let year = currentDate.getFullYear();\r\n            let formattedDate = day + \"-\" + month + \"-\" + year;\r\n\r\n            // // Check if attendance for today's date exists in Firestore\r\n            // const querySnapshot = await getDocs(\r\n            //     query(collection(firestore, 'attend'), where('markedAt', '==', formattedDate))\r\n            // );\r\n\r\n            const userId = auth?.currentUser?.uid;\r\n\r\n            // Check if attendance for today's date and current user exists in Firestore\r\n            const querySnapshot = await getDocs(\r\n                query(collection(firestore, 'attend'),\r\n                    where('userId', '==', userId),\r\n                    where('markedAt', '==', formattedDate)\r\n                )\r\n            );\r\n\r\n            if (!querySnapshot.empty) {\r\n                console.log(\"Attendance already marked for today\");\r\n\r\n                let a = document.getElementById(\"msg1\");\r\n                a.innerHTML = \"Attendance already marked for today\";\r\n\r\n            }\r\n            else {\r\n                // Attendance for today's date doesn't exist, so add it to Firestore\r\n                await addDoc(collection(firestore, 'attend'), {\r\n                    userId: auth?.currentUser?.uid,\r\n                    user: currentUser?.name,\r\n                    markedAt: formattedDate,\r\n                    date: formattedDate,\r\n                    status: \"present\"\r\n                });\r\n                console.log(\"Attendance marked successfully\");\r\n\r\n                let b = document.getElementById(\"msg1\");\r\n                b.innerHTML = \"Attendance marked successfully\";\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error marking attendance:\", error);\r\n\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            {CURRENT_USER_TYPE === \"Candidate_User\" ?\r\n                (\r\n                    <>\r\n                        <div className='container msg' id='msg1'>\r\n\r\n                        </div>\r\n\r\n                        <div className='container my-4'>\r\n                            <Link onClick={mattend} type=\"button\" className=\"btn btn-primary m-4\" to=\"/mattend\">Mark Attendance</Link>\r\n                        </div>\r\n                    </>\r\n                )\r\n                :\r\n                (\r\n\r\n                    <div>You are not authorized</div>\r\n                )\r\n            }\r\n        </>\r\n    )\r\n}\r\n"],"names":["Mattend","_ref","CURRENT_USER_TYPE","currentUser","useAuth","_jsx","_Fragment","children","_jsxs","className","id","Link","onClick","async","_auth$currentUser","currentDate","Date","formattedDate","getDate","getMonth","getFullYear","userId","auth","uid","getDocs","query","collection","firestore","where","empty","_auth$currentUser2","addDoc","user","name","markedAt","date","status","console","log","document","getElementById","innerHTML","error","type","to"],"sourceRoot":""}