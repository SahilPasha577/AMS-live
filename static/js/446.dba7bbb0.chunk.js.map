{"version":3,"file":"static/js/446.dba7bbb0.chunk.js","mappings":"uNAMO,MAAMA,EAAUA,KAEnB,MAAM,YAAEC,IAAgBC,EAAAA,EAAAA,KAElBC,GAAaC,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,UAkDzC,OACIC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACIF,EAAAA,EAAAA,KAAA,OAAKG,UAAU,iBAAgBD,UAC3BF,EAAAA,EAAAA,KAACI,EAAAA,GAAI,CAACC,QAnDFC,UAAa,IAADC,EAExB,IAAIC,EAAc,IAAIC,KAIlBC,EAHMF,EAAYG,UAGI,KAFdH,EAAYI,WAAa,GAEG,IAD7BJ,EAAYK,cAQvB,MAAMC,EAAa,OAAJC,EAAAA,SAAI,IAAJA,EAAAA,IAAiB,QAAbR,EAAJQ,EAAAA,GAAMpB,mBAAW,IAAAY,OAAb,EAAJA,EAAmBS,IAkB5B,IAADC,EAAAC,SAfuBC,EAAAA,EAAAA,KACxBC,EAAAA,EAAAA,IAAMtB,EAAAA,EAAAA,IAAWC,EAAAA,GAAW,WACxBsB,EAAAA,EAAAA,IAAM,SAAU,KAAMP,IACtBO,EAAAA,EAAAA,IAAM,WAAY,KAAMX,MAIbY,YAUTC,EAAAA,EAAAA,IAAO1B,EAAY,CACrBiB,OAAY,OAAJC,EAAAA,SAAI,IAAJA,EAAAA,IAAiB,QAAbE,EAAJF,EAAAA,GAAMpB,mBAAW,IAAAsB,OAAb,EAAJA,EAAmBD,IAC3BQ,KAAiB,OAAX7B,QAAW,IAAXA,OAAW,EAAXA,EAAa8B,KACnBC,OAAQ,gBACRC,KAAU,OAAJZ,EAAAA,SAAI,IAAJA,EAAAA,IAAiB,QAAbG,EAAJH,EAAAA,GAAMpB,mBAAW,IAAAuB,OAAb,EAAJA,EAAmBU,SACzBC,KAAMnB,EACNoB,SAAUpB,IAGTqB,MAAMC,IACHC,QAAQC,IAAI,cAAc,IAnBlCD,QAAQC,IAAI,iCAqBhB,EAMgCC,KAAK,SAAShC,UAAU,qBAAoBD,SAAC,qBAE1E,C","sources":["MyComp/Rleaves.js"],"sourcesContent":["import { addDoc, collection, getDocs, query, serverTimestamp, where } from 'firebase/firestore'\r\nimport React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { auth, firestore } from '../Authen/firebase'\r\nimport { useAuth } from '../Authen/useAuth'\r\n\r\nexport const Rleaves = () => {\r\n\r\n    const { currentUser } = useAuth();\r\n\r\n    const messageRef = collection(firestore, \"attend\");\r\n\r\n    const mleaves = async () => {\r\n\r\n        let currentDate = new Date();\r\n        let day = currentDate.getDate();\r\n        let month = currentDate.getMonth() + 1; // January is 0, so we add 1\r\n        let year = currentDate.getFullYear();\r\n        let formattedDate = day + \"-\" + month + \"-\" + year;\r\n\r\n        // // Check if attendance for today's date exists in Firestore\r\n        // const querySnapshot = await getDocs(\r\n        //     query(collection(firestore, 'attend'), where('markedAt', '==', formattedDate))\r\n        // );\r\n\r\n        const userId = auth?.currentUser?.uid;\r\n\r\n        // Check if attendance for today's date and current user exists in Firestore\r\n        const querySnapshot = await getDocs(\r\n            query(collection(firestore, 'attend'),\r\n                where('userId', '==', userId),\r\n                where('markedAt', '==', formattedDate)\r\n            )\r\n        );\r\n\r\n        if (!querySnapshot.empty) {\r\n            console.log(\"Leave already marked for today\");\r\n\r\n            // let a = document.getElementById(\"msg1\");\r\n            // a.innerHTML = \"Attendance already marked for today\";\r\n\r\n        }\r\n\r\n        else {\r\n\r\n            await addDoc(messageRef, {\r\n                userId: auth?.currentUser?.uid,\r\n                user: currentUser?.name,\r\n                status: \"leave pending\",\r\n                pics: auth?.currentUser?.photoURL,\r\n                date: formattedDate,\r\n                markedAt: formattedDate,\r\n                // approval: \"pending\"\r\n            })\r\n                .then((value) => {\r\n                    console.log(\"Leave Added\")\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className='container my-4'>\r\n                <Link onClick={mleaves} type=\"button\" className=\"btn btn-danger m-4\">Request Leave</Link>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n"],"names":["Rleaves","currentUser","useAuth","messageRef","collection","firestore","_jsx","_Fragment","children","className","Link","onClick","async","_auth$currentUser","currentDate","Date","formattedDate","getDate","getMonth","getFullYear","userId","auth","uid","_auth$currentUser2","_auth$currentUser3","getDocs","query","where","empty","addDoc","user","name","status","pics","photoURL","date","markedAt","then","value","console","log","type"],"sourceRoot":""}